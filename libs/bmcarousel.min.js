/*! Copyright (c) 2013 Bruno Marcel
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 1.0.2
 *
 * Requires: jQuery 1.8.1+
 */
var def={t:"",p:"",reload:false,px:"px",container:"",wrap:"",carousel:"",left:"",right:"",li:"",liQtd:0,liWidth:0,liVisible:0,space:0,qtdScroll:0,scroll:0,containerWidth:0,scrollFinal:0},bmcarousel={start:function(e){this.liWidth(e)},setValues:function(e){if(!e.reload)e.container.wrap('<div class="wrapCarousel"><div class="carousel"></div></div>');def.t=this,def.p=e,def.reload=def.p.reload||false,def.container=def.p.container,def.wrap=def.container.parent().parent(),def.carousel=def.container.parent(),def.left=def.p.left||"left",def.right=def.p.right||"right",def.li=def.container.find("li"),def.liQtd=def.li.length,def.liWidth=def.li.width(),def.liVisible=def.p.visible||3,def.space=def.p.space||10,def.scroll=def.liWidth*def.liVisible+def.space*def.liVisible,def.qtdScroll=def.p.qtdScroll*def.liWidth+def.space*def.p.qtdScroll||def.liWidth+def.space,def.containerWidth=def.liWidth*def.liQtd+def.space*(def.liQtd-1),def.scrollFinal=-(def.containerWidth-def.scroll)-def.space;def.t.init()},init:function(){def.t.format()},format:function(){def.carousel.css({width:def.scroll,overflow:"hidden"});def.t.defineData();if(!def.p.reload){def.wrap.append('<a href="#" class="carousel leftCarousel">'+def.left+"</a>"+'<a href="#" class="carousel rightCarousel">'+def.right+"</a>");def.t.defineVisibleArrows();var e=70;var t=100;$.each(def.carousel.children("ul").find("li"),function(n,r){$(r).delay(t+=e).fadeIn()})}def.container.css({width:def.containerWidth});if(!def.p.reload){def.li.first().addClass("first");def.li.last().addClass("last")}def.li.not(".first").css({"margin-left":def.space+def.px});if(!def.p.reload)def.t.clickAnimates()},defineData:function(){def.container.attr("data-visible",def.liVisible);def.container.attr("data-scroll",def.scrollFinal);def.container.attr("data-qtdScroll",def.qtdScroll)},defineVisibleArrows:function(){if(def.liQtd<=def.liVisible){def.container.parents(".wrapCarousel").children("a.carousel").addClass("none").hide()}else{def.container.parents(".wrapCarousel").children("a.leftCarousel").addClass("none").hide()}},clickAnimates:function(){def.wrap.find("a.carousel").on("click",function(e){e.preventDefault();th=$(this);ctn=th.parent().find("ul");var t=ctn.attr("data-qtdscroll");console.log(t);th.hasClass("leftCarousel")?def.t.animates(ctn,t):def.t.animates(ctn,-t)})},animates:function(e,t){var n=e.data("scroll");e.stop(true,true).animate({"margin-left":"+="+t},"slow",function(){var t=e.parent().parent();var r=parseInt(e.css("margin-left").replace("px","")),i=t.find(".leftCarousel"),s=t.find(".rightCarousel");if(t.find(".none").length>0)t.find(".none").fadeIn().removeClass("none");if(r>0){e.stop(true,true).animate({"margin-left":0},"fast");i.fadeOut().addClass("none")}else if(r<n){e.stop(true,true).animate({"margin-left":n},"fast");s.fadeOut().addClass("none")}})},liWidth:function(e){_this=this;var t=e.container.children("li:first").children("img");t.one("load",function(){def.liWidth=t.parent().width();_this.setValues(e)}).each(function(){if(this.complete)$(this).load()})},reload:function(e){def.t.defineData();e.container.parent().css({width:e.container.find("li").width()*e.visible+def.space*e.visible+def.px})}}